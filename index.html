<!DOCTYPE html>
<html>
<head>
  <title>DICTI AI P1</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #121212;
      color: #e5e5e5;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px 20px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 30px;
      letter-spacing: 1px;
    }

    textarea {
      width: 80%;
      max-width: 800px;
      height: 180px;
      padding: 14px;
      font-size: 16px;
      background: #2a2a2a;
      color: #f5f5f5;
      border: none;
      border-radius: 8px;
      resize: vertical;
      outline: none;
    }

    textarea::placeholder {
      color: #9ca3af;
    }

    button {
      margin-top: 15px;
      padding: 10px 24px;
      font-size: 15px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #2563eb;
    }

    #output {
      margin-top: 25px;
      width: 80%;
      max-width: 800px;
      background: #1f1f1f;
      padding: 16px;
      border-radius: 8px;
      line-height: 1.6;
    }
  </style>
</head>

<body>

<h1>DICTI AI P1</h1>

<textarea id="text" placeholder="Type or paste your text here..."></textarea>
<button onclick="checkText()">Enter</button>

<div id="output"></div>

<script>
function checkText() {
  const text = document.getElementById("text").value;
  const output = document.getElementById("output");

  fetch("https://dictiai-p1-1.onrender.com/check", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ text: text })
  })
  .then(res => res.json())
  .then(data => {
    if (!data.errors || data.errors.length === 0) {
      output.innerHTML = "✅ All good!";
    } else {
      output.innerHTML = data.errors.map(e =>
        `Line ${e.line}: ${e.type} → "${e.word}"`
      ).join("<br>");
    }
  })
  .catch(err => {
    output.innerHTML = "Server error. Backend may be waking up...";
    console.error(err);
  });
}

// Enter to submit, Shift+Enter for newline
document.getElementById("text").addEventListener("keydown", function(e) {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    checkText();
  }
});
</script>

</body>
</html>
